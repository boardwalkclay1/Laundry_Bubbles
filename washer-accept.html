<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta-name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accept Jobs â€“ Laundry Bubbles</title>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #FFF4D9;
            color: #5A3E2B;
        }

        header {
            background: #D96E30;
            padding: 18px;
            text-align: center;
            color: white;
            font-size: 1.4rem;
            font-weight: bold;
        }

        .container {
            padding: 20px;
        }

        .job-box {
            background: white;
            padding: 18px;
            border-radius: 10px;
            border: 2px solid #F4C542;
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.5rem;
        }

        .btn {
            display: block;
            background: #F4C542;
            padding: 14px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            color: #5A3E2B;
            text-decoration: none;
            border: 2px solid #D96E30;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <header>Available Jobs</header>

    <div class="container" id="jobs-container">
        <!-- Jobs will load here dynamically -->
    </div>

    <a href="washer.html" class="btn" style="margin: 20px;">Back to Dashboard</a>

    <script>
        async function loadJobs() {
            const res = await fetch('/api/jobs');
            if (!res.ok) {
                document.getElementById('jobs-container').innerHTML =
                    '<p>No jobs available or subscription required.</p>';
                return;
            }

            const jobs = await res.json();
            const container = document.getElementById('jobs-container');
            container.innerHTML = '';

            jobs.forEach(job => {
                const box = document.createElement('div');
                box.className = 'job-box';
                box.innerHTML = `
                    <strong>Pickup at:</strong> ${job.address}<br>
                    <strong>Time:</strong> ${job.time}<br>
                    <strong>Notes:</strong> ${job.notes}<br>
                    <a href="washer-pickup.html?job=${job.id}" class="btn">Accept Job</a>
                `;
                container.appendChild(box);
            });
        }

        loadJobs();
    </script>
</body>
</html>
